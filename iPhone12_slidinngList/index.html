<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title></title>
		<link rel="stylesheet" type="text/css" href="./style.css" />
	</head>
	<body>
		<h2>
			Superfast wireless
			<p>Hello 5G.</p>
		</h2>

		<div id="iphone">
			<div id="hardware"></div>
			<div id="ui">
				<img src="https://assets.codepen.io/2002878/iphone12-5g_top_ui.jpg" class="top-ui" alt="">

				<ul>
					<li>
						<img src="https://assets.codepen.io/2002878/iphone12-5g_show_01.jpg" />
					</li>
					<li>
						<img src="https://assets.codepen.io/2002878/iphone12-5g_show_02.jpg" />
					</li>
					<li>
						<img src="https://assets.codepen.io/2002878/iphone12-5g_show_03.jpg" />
					</li>
					<li>
						<img src="https://assets.codepen.io/2002878/iphone12-5g_show_04.jpg" />
					</li>
					<li>
						<img src="https://assets.codepen.io/2002878/iphone12-5g_show_05.jpg" />
					</li>
					<li>
						<img src="https://assets.codepen.io/2002878/iphone12-5g_show_06.jpg" />
					</li>
					<li>
						<img src="https://assets.codepen.io/2002878/iphone12-5g_show_07.jpg" />
					</li>
				</ul>
			</div>
		</div>
		<script type="text/javascript">
			const rows = document.querySelectorAll('#ui ul li')
			const html = document.documentElement

			document.addEventListener('scroll', (e) => {
				let scrolled = html.scrollTop / (html.scrollHeight - html.clientHeight)

				// rows.length为li的总数量
				let total = 1 / rows.length

				for (let [index, row] of rows.entries()) {
					// 计算所有li在ul中的占比
					let start = total * index
					let end = total * (index + 1)

					// console.log(`row ${index}: ${start} - ${end}`)

					let progress = (scrolled - start) / (end - start)
					if (progress >= 1) progress = 1
					if (progress <= 0) progress = 0

					row.style.setProperty('--progress', progress)
				}
			})
		</script>
	</body>
</html>
